Build profile: -w ghc-9.6.6 -O1
In order, the following will be built (use -v for more details):
 - serversession-1.0.3 (test:tests) (ephemeral targets)
Preprocessing test suite 'tests' for serversession-1.0.3...
Building test suite 'tests' for serversession-1.0.3...
Running 1 test suites...
Test suite tests: RUNNING...

SessionId
  is generated with 24 bytes from letters, numbers, dashes and underscores [✔]
  accepts as valid the session IDs generated by ourselves [✔]
    +++ OK, passed 1 test.
  does not accept as valid some example invalid session IDs [✔]
State
  has the expected default values [✔]
  has sane setters of ambiguous types [✔]
loadSession
  returns empty session and token when the session ID cookie is not present [✔]
  does not need the storage if session ID cookie has invalid data [✔]
  returns empty session and token when the session ID cookie refers to inexistent session [✔]
  returns the session from the storage when the session ID refers to an existing session [✔]
checkExpired
  agrees with nextExpires [✔]
    +++ OK, passed 100 tests.
nextExpires
  looks sane [✔]
cookieExpires
  is Nothing for non-persistent cookies regardless of session [✔]
    +++ OK, passed 100 tests.
  is a long time for persistent cookies without timeouts regardless of session [✔]
saveSession
  works for a complex example [✔]
invalidateIfNeeded
  does not invalidate when not changing auth ID nor explicitly requesting [✔]
  invalidates the current session when changing auth ID [✔]
  invalidates the current session when CurrentSessionId is forced [✔]
  invalidates all of the user's sessions when AllSessionIdsOfLoggedUser is forced [✔]
saveSessionOnDb
  inserts new sessions when there wasn't an old one [✔]
  replaces sesssions when there was an old one [✔]
  does not save session if it's empty and there wasn't an old one [✔]
  saves session if it's empty but there was an old one [✔]
  respects the timeout resolution [✔]
decomposeSession/SessionMap
  it is sane when not finding auth key or force invalidate key [✔]
    +++ OK, passed 100 tests.
  parses the force invalidate key [✔]
    +++ OK, passed 100 tests.
  removes the auth key [✔]
recomposeSession/SessionMap
  does not change session data for sessions without auth ID [✔]
    +++ OK, passed 100 tests.
  adds (overwriting) the auth ID to the session data [✔]
    +++ OK, passed 100 tests.
MockStorage
  runTransactionM should be sane [✔]
  getSession should return Nothing for inexistent sessions [✔]
  deleteSession should not fail for inexistent sessions [✔]
  deleteSession should delete the session [✔]
  deleteAllSessionsOfAuthId should not fail for inexistent auth IDs [✔]
  deleteAllSessionsOfAuthId should delete the relevant sessions (but no more) [✔]
  getSession should return the contents of insertSession [✔]
  insertSession throws an exception if a session already exists [✔]
  getSession should return the contents of replaceSession [✔]
  replaceSession throws an exception if a session does not exist [✔]
  stress test: one million small keys [✔]
  stress test: one 100 MiB value [✔]
  stress test: one 1 MiB key [✔]
  stress test: key with all possible Unicode code points and value with all possible byte values [✔]

Finished in 0.8814 seconds
42 examples, 0 failures
   1,410,764,112 bytes allocated in the heap
     278,480,360 bytes copied during GC
     168,034,656 bytes maximum residency (3 sample(s))
       3,587,744 bytes maximum slop
             494 MiB total memory in use (0 MiB lost due to fragmentation)

                                     Tot time (elapsed)  Avg pause  Max pause
  Gen  0       168 colls,     0 par    0.000s   0.263s     0.0016s    0.0038s
  Gen  1         3 colls,     0 par    0.000s   0.157s     0.0524s    0.1200s

  TASKS: 80 (1 bound, 79 peak workers (79 total), using -N32)

  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.010s  (  0.019s elapsed)
  MUT     time    1.241s  (  0.495s elapsed)
  GC      time    0.000s  (  0.420s elapsed)
  EXIT    time    0.038s  (  0.005s elapsed)
  Total   time    1.289s  (  0.940s elapsed)

  Alloc rate    1,136,536,429 bytes per MUT second

  Productivity  96.3% of total user, 52.7% of total elapsed

Test suite tests: PASS
Test suite logged to:
/tmp/workdir-serversession/serversession-1.0.3/dist-newstyle/build/x86_64-linux/ghc-9.6.6/serversession-1.0.3/t/tests/test/serversession-1.0.3-tests.log
1 of 1 test suites (1 of 1 test cases) passed.
