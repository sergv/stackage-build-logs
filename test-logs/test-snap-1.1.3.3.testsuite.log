Build profile: -w ghc-9.6.6 -O1
In order, the following will be built (use -v for more details):
 - snap-1.1.3.3 (test:testsuite) (ephemeral targets)
Preprocessing test suite 'testsuite' for snap-1.1.3.3...
Building test suite 'testsuite' for snap-1.1.3.3...
Running 1 test suites...
Test suite testsuite: RUNNING...
initializing snaplet
bringing up server
Listening on http://127.0.0.1:9753
Can't open log file "log/access.log".
Can't open log file "log/error.log".
Exception: log/access.log: openFile: does not exist (No such file or directory)
Exception: log/error.log: openFile: does not exist (No such file or directory)
Logging to stderr instead. **THIS IS BAD, YOU OUGHT TO FIX THIS**

Logging to stderr instead. **THIS IS BAD, YOU OUGHT TO FIX THIS**

127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /hello HTTP/1.1" 200 24 - "-"
[07/Oct/2024:12:01:03 +0000] During processing of request from 127.0.0.1:33120
request:
"GET /bazbadpage HTTP/1.1\naccept-encoding: gzip\naccept: */*\nhost: 127.0.0.1:9753\n\nsn=\"127.0.0.1:9753\" c=127.0.0.1:33120 s=127.0.0.1:9753 ctx=/ clen=n/a"
A web handler threw an exception. Details:
Template "cpyga" not found.
CallStack (from HasCallStack):
  error, called at src/Snap/Snaplet/HeistNoClass.hs:348:18 in snap-1.1.3.3-inplace-testsuite:Snap.Snaplet.HeistNoClass

Shutting down..
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /index HTTP/1.1" 200 44 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET / HTTP/1.1" 200 44 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /splicepage HTTP/1.1" 200 69 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /routeWithSplice HTTP/1.1" 200 54 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /routeWithConfig HTTP/1.1" 200 44 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/foopage HTTP/1.1" 200 51 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/fooConfig HTTP/1.1" 200 21 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/fooRootUrl HTTP/1.1" 200 16 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /barconfig HTTP/1.1" 200 21 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazpage HTTP/1.1" 200 66 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazpage2 HTTP/1.1" 200 77 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazpage3 HTTP/1.1" 200 66 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazpage4 HTTP/1.1" 200 66 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /barrooturl HTTP/1.1" 200 16 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazbadpage HTTP/1.1" 500 220 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/fooSnapletName HTTP/1.1" 200 23 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/fooFilePath HTTP/1.1" 200 68 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /embed/heist/embeddedpage HTTP/1.1" 200 68 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /embed/aoeuhtns HTTP/1.1" 200 70 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /embed/heist/onemoredir/extra HTTP/1.1" 200 57 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /foo/handlerConfig HTTP/1.1" 200 142 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bar/handlerConfig HTTP/1.1" 200 120 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazpage5 HTTP/1.1" 200 140 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bazconfig HTTP/1.1" 200 169 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /sessionDemo HTTP/1.1" 200 49 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bad HTTP/1.1" 404 201 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /good HTTP/1.1" 404 202 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /bad HTTP/1.1" 404 201 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /admin/reload HTTP/1.1" 200 549 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /admin/reload HTTP/1.1" 200 933 - "-"
127.0.0.1 - - [07/Oct/2024:12:01:03 +0000] "GET /good HTTP/1.1" 200 47 - "-"
User JSON datafile not found. Creating a new one.
snap:
  internal server tests:
    non-cabal-tests:
      internal/hello: [OK]
      internal/index: [OK]
      internal/: [OK]
      internal/splicepage: [OK]
      internal/routeWithSplice: [OK]
      internal/routeWithConfig: [OK]
      internal/foo/foopage: [OK]
      internal/foo/fooConfig: [OK]
      internal/foo/fooRootUrl: [OK]
      internal/barconfig: [OK]
      internal/bazpage: [OK]
      internal/bazpage2: [OK]
      internal/bazpage3: [OK]
      internal/bazpage4: [OK]
      internal/barrooturl: [OK]
      internal/bazbadpage: [OK]
      internal/foo/fooSnapletName: [OK]
      internal/foo/fooFilePath: [OK]
      internal/embed/heist/embeddedpage: [OK]
      internal/embed/aoeuhtns: [OK]
      internal/embed/heist/onemoredir/extra: [OK]
      internal/foo/handlerConfig: [OK]
      internal/bar/handlerConfig: [OK]
      internal/bazpage5: [OK]
      internal/bazconfig: [OK]
      internal/sessionDemo: [OK]
User JSON datafile not found. Creating a new one.
      internal/reload-test: [OK]
    Snap.Snaplet.Internal.Lensed:
      lensed/fmap: [OK]
      lensed/applicative: [OK]
      lens/MonadState: [OK]
    Snap.Snaplet.Internal.LensT:
      lensed/fmap: [OK]
      lensed/applicative: [OK]
      lens/MonadState: [OK]
    Snap.Snaplet.Internal.RST:
      RST/execRST: [OK, passed 100 tests]
      RST/execRST: [OK, passed 100 tests]
      RST/fail: [OK]
      RST/Alternative: [OK]
    Snap.Snaplet.Internal:
      initializer tests: [OK]
      buildPath generates no double slashes: [OK]
  Snap.Snaplet.Auth:
    Snap.Snaplet.Auth.Handlers:
      createUser tests:
User JSON datafile not found. Creating a new one.
        createUser good params: [OK]
User JSON datafile not found. Creating a new one.
        createUser with config file settings: [OK]
User JSON datafile not found. Creating a new one.
        createUser good updatedAt: [OK]
User JSON datafile not found. Creating a new one.
        createUser with role: [OK]
        createUser empty username: [OK]
        createUser duplicate user: [OK]
        username exists: [OK]
        successful loginByUsername: [OK]
        loginByUsername encrypted pwd: [OK]
        loginByUsername invalid user: [OK]
        loginByUsername invalid user: [OK]
        loginByRememberToken no token: [OK]
        loginByRememberToken token: [OK]
        logout no user logged in.: [OK]
        logout user logged in.: [OK]
        currentUser unsuccesful call: [OK]
        successful currentUser call: [OK]
        isLoggedIn, no user logged: [OK]
        isLoggedIn, user logged: [OK]
        saveUser null username: [OK]
        saveUser good update params: [OK]
        successful markAuthFail call: [OK]
        successful markAuthSuccess call: [OK]
        checkPasswordAndLogin OK: [OK]
        checkPasswordAndLogin KO: [OK]
        authenticatePassword OK: [OK]
        authenticatePassword no pwd: [OK]
        authenticatePassword wrong pwd: [OK]
        registerUser OK: [OK]
        registerUser no user given: [OK]
        registerUser no pwd given: [OK]
        requireUser good handler exec: [OK]
        requireUser bad handler exec: [OK]
    Snap.Snaplet.Auth.SpliceHelpers:
User JSON datafile not found. Creating a new one.
      Render new user page: [OK]
User JSON datafile not found. Creating a new one.
      New user login render: [OK]
User JSON datafile not found. Creating a new one.
      New user suspend render: [OK]
User JSON datafile not found. Creating a new one.
      cRender new user page: [OK]
    Auth type tests:
      Password serialization: [OK]
      Fill in [] roles: [OK]
      Fail deserialization: [OK]
      AuthFailure show instances: [OK, passed 100 tests]
      Encrypt agrees with password: [OK, passed 100 tests]
      Reject clear encrypted pw check: [OK]
      Test Role Show instance: [OK]
      Test Role Read instance: [OK]
      Test Role Ord  instance: [OK]
      Test PW Show instance: [OK]
      Test PW Read instance: [OK]
      Test PW Ord  instance: [OK]
      Test AuthFailure Eq instance: [OK]
      Test AuthFailure Show instance: [OK]
      Test AuthFailure Ord instance: [OK]
      Test UserId Show instance: [OK]
      Test UserId Read instance: [OK]
      Test AuthUser Show instance: [OK]
      Test AuthUser Eq instance: [OK]
  Snap.Snaplet.Test:
    runHandler simple: [OK]
    runHandler' simple: [OK]
    evalHandler simple: [OK]
    evalHandler' simple: [OK]
    evalHandler failing simple: [OK]
    getSnaplet failing: [OK]
    readRequestBody doesn't hang: [OK]
  Snap.Snaplet.Heist:
    Load templates: [OK]
Templates ["userpage"] ["index"] ["bazpage"] ["foopage","foo"] ["good"] ["_foopage"] ["page"] ["foopage"] ["session"] ["barpage","extraTemplates"] ["bazconfig"] ["splicepage"]
Splices: "foosplice" "appsplice" "ifLoggedIn" "appconfig" "fooconfig" "cache" "ifLoggedOut" "loggedInUser"
Compiled splices: "ifLoggedIn" "cache" "ifLoggedOut" "loggedInUser" "userSplice"
    Get Heist state: [OK]
    Handler with heist state: [OK]
    gRender a template: [OK]
    cRender a template: [OK]
    Render a template: [OK]
    gRenderAs a small template: [OK]
    cRenderAs a template: [OK]
    renderAs a template: [OK]
    gServe existing template: [OK]
    cServe templates: [OK]
    serve templates: [OK]
    gHeistServe underscore template: [OK]
    gHeistServe missing template: [OK]
    gHeistServeSingle template: [OK]
    cHeistServeSingle template: [OK]
    heistServeSingle template: [OK]
    gHeistServeSingle underscored template: [OK]
    gHeistServeSingle missing template: [OK]
    Choose compiled mode: [OK]
    Choose interpreted mode: [OK]
    Render with splices: [OK]
    Recognize withSplices: [OK]
    Recognize heistLocal: [OK]
    cRender with compiled module: [OK]
    cRenderAs compiled module: [OK]
    cHeistServe a template: [OK]
    cHeistServeSingle a template: [OK]
  Snaplet Config:
    Monoid left identity: [OK, passed 100 tests]
    Monoid right identity: [OK, passed 100 tests]
    Monoid associativity: [OK, passed 100 tests]
    Verify Typeable instance: [OK]
  Snap.Snaplet.Internal.RST:
    RST/execRST: [OK, passed 100 tests]
    RST/execRST: [OK, passed 100 tests]
    RST/fail: [OK]
    RST/Alternative: [OK]
  Snap.Snaplet.Internal.LensT:
    lensed/fmap: [OK]
    lensed/applicative: [OK]
    lens/MonadState: [OK]
  Snap.Snaplet.Internal.Lensed:
    lensed/fmap: [OK]
    lensed/applicative: [OK]
    lens/MonadState: [OK]

         Properties  Test Cases  Total 
 Passed  10          134         144   
 Failed  0           0           0     
 Total   10          134         144   
waiting for termination mvar
Test suite testsuite: PASS
Test suite logged to:
/tmp/workdir-snap/snap-1.1.3.3/dist-newstyle/build/x86_64-linux/ghc-9.6.6/snap-1.1.3.3/t/testsuite/test/snap-1.1.3.3-testsuite.log
1 of 1 test suites (1 of 1 test cases) passed.
