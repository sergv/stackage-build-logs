Build profile: -w ghc-9.6.6 -O1
In order, the following will be built (use -v for more details):
 - servant-auth-server-0.4.9.0 (lib) (first run)
 - servant-auth-server-0.4.9.0 (test:spec) (first run)
 - servant-auth-server-0.4.9.0 (test:readme) (first run)
Configuring library for servant-auth-server-0.4.9.0...
Preprocessing library for servant-auth-server-0.4.9.0...
Building library for servant-auth-server-0.4.9.0...
[ 1 of 12] Compiling Servant.Auth.Server.Internal.AddSetCookie

src/Servant/Auth/Server/Internal/AddSetCookie.hs:107:35: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘respond’ shadows the existing binding
      imported from ‘Servant’ at src/Servant/Auth/Server/Internal/AddSetCookie.hs:13:1-24
      (and originally defined in ‘Servant.Server.UVerb’)
    |
107 |   addSetCookies cookies r request respond
    |                                   ^^^^^^^

src/Servant/Auth/Server/Internal/AddSetCookie.hs:113:47: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘respond’ shadows the existing binding
      imported from ‘Servant’ at src/Servant/Auth/Server/Internal/AddSetCookie.hs:13:1-24
      (and originally defined in ‘Servant.Server.UVerb’)
    |
113 |   addSetCookies cookies r = Tagged $ \request respond ->
    |                                               ^^^^^^^
[ 2 of 12] Compiling Servant.Auth.Server.Internal.ConfigTypes
[ 3 of 12] Compiling Servant.Auth.Server.Internal.FormLogin
[ 4 of 12] Compiling Servant.Auth.Server.Internal.ThrowAll

src/Servant/Auth/Server/Internal/ThrowAll.hs:10:1: warning: [-Wunused-imports]
    The import of ‘Data.Tagged’ is redundant
      except perhaps to import instances from ‘Data.Tagged’
    To import instances alone, use: import Data.Tagged()
   |
10 | import Data.Tagged               (Tagged (..))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/ThrowAll.hs:11:1: warning: [-Wunused-imports]
    The import of ‘NamedRoutes, ServerError’
    from module ‘Servant’ is redundant
   |
11 | import Servant                   ((:<|>) (..), ServerError(..), NamedRoutes(..))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/ThrowAll.hs:11:1: warning: [GHC-99623] [-Wdodgy-imports]
    The import item ‘NamedRoutes(..)’ suggests that
    ‘NamedRoutes’ has (in-scope) constructors or class methods,
    but it has none
   |
11 | import Servant                   ((:<|>) (..), ServerError(..), NamedRoutes(..))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/ThrowAll.hs:48:19: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘respond’ shadows the existing binding
      imported from ‘Servant.Server’ at src/Servant/Auth/Server/Internal/ThrowAll.hs:14:1-21
      (and originally defined in ‘Servant.Server.UVerb’)
   |
48 |   throwAll e _req respond
   |                   ^^^^^^^

src/Servant/Auth/Server/Internal/ThrowAll.hs:55:31: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘respond’ shadows the existing binding
      imported from ‘Servant.Server’ at src/Servant/Auth/Server/Internal/ThrowAll.hs:14:1-21
      (and originally defined in ‘Servant.Server.UVerb’)
   |
55 |   throwAll e = Tagged $ \_req respond ->
   |                               ^^^^^^^
[ 5 of 12] Compiling Servant.Auth.Server.Internal.Types

src/Servant/Auth/Server/Internal/Types.hs:8:1: warning: [-Wunused-imports]
    The import of ‘Data.Monoid’ is redundant
      except perhaps to import instances from ‘Data.Monoid’
    To import instances alone, use: import Data.Monoid()
  |
8 | import Data.Monoid          (Monoid (..))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:9:1: warning: [-Wunused-imports]
    The import of ‘Data.Semigroup’ is redundant
      except perhaps to import instances from ‘Data.Semigroup’
    To import instances alone, use: import Data.Semigroup()
  |
9 | import Data.Semigroup       (Semigroup (..))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:38:3: warning: [-Wnoncanonical-monad-instances]
    Noncanonical ‘pure = return’ definition detected
    in the instance declaration for ‘Applicative AuthResult’.
    Move definition from ‘return’ to ‘pure’
    See also: https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/monad-of-no-return
   |
38 |   pure = return
   |   ^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:42:3: warning: [-Wnoncanonical-monad-instances]
    Noncanonical ‘return’ definition detected
    in the instance declaration for ‘Monad AuthResult’.
    ‘return’ will eventually be removed in favour of ‘pure’
    Either remove definition for ‘return’ (recommended) or define as ‘return = pure’
    See also: https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/monad-of-no-return
   |
42 |   return = Authenticated
   |   ^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:77:3: warning: [-Wnoncanonical-monad-instances]
    Noncanonical ‘pure = return’ definition detected
    in the instance declaration for ‘Applicative AuthCheck’.
    Move definition from ‘return’ to ‘pure’
    See also: https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/monad-of-no-return
   |
77 |   pure = return
   |   ^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:81:3: warning: [-Wnoncanonical-monad-instances]
    Noncanonical ‘return’ definition detected
    in the instance declaration for ‘Monad AuthCheck’.
    ‘return’ will eventually be removed in favour of ‘pure’
    Either remove definition for ‘return’ (recommended) or define as ‘return = pure’
    See also: https://gitlab.haskell.org/ghc/ghc/-/wikis/proposal/monad-of-no-return
   |
81 |   return = AuthCheck . return . return . return
   |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Servant/Auth/Server/Internal/Types.hs:104:10: warning: [GHC-06201] [-Wmissing-methods]
    • No explicit implementation for
        ‘monotonicTime’
    • In the instance declaration for ‘MonadTime AuthCheck’
    |
104 | instance MonadTime AuthCheck where
    |          ^^^^^^^^^^^^^^^^^^^
[ 6 of 12] Compiling Servant.Auth.Server.Internal.JWT
[ 7 of 12] Compiling Servant.Auth.Server.Internal.Cookie

src/Servant/Auth/Server/Internal/Cookie.hs:6:1: warning: [-Wunused-imports]
    The import of ‘Control.Monad.Except’ is redundant
      except perhaps to import instances from ‘Control.Monad.Except’
    To import instances alone, use: import Control.Monad.Except()
  |
6 | import           Control.Monad.Except
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[ 8 of 12] Compiling Servant.Auth.Server.Internal.BasicAuth
[ 9 of 12] Compiling Servant.Auth.Server.Internal.Class

src/Servant/Auth/Server/Internal/Class.hs:6:1: warning: [-Wunused-imports]
    The import of ‘Data.Monoid’ is redundant
      except perhaps to import instances from ‘Data.Monoid’
    To import instances alone, use: import Data.Monoid()
  |
6 | import Data.Monoid
  | ^^^^^^^^^^^^^^^^^^
[10 of 12] Compiling Servant.Auth.Server.Internal

src/Servant/Auth/Server/Internal.hs:18:1: warning: [-Wunused-imports]
    The import of ‘Servant.Auth.Server.Internal.JWT’ is redundant
      except perhaps to import instances from ‘Servant.Auth.Server.Internal.JWT’
    To import instances alone, use: import Servant.Auth.Server.Internal.JWT()
   |
18 | import Servant.Auth.Server.Internal.JWT
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[11 of 12] Compiling Servant.Auth.Server
[12 of 12] Compiling Servant.Auth.Server.SetCookieOrphan
Configuring test suite 'spec' for servant-auth-server-0.4.9.0...
Preprocessing test suite 'spec' for servant-auth-server-0.4.9.0...
Building test suite 'spec' for servant-auth-server-0.4.9.0...
[1 of 2] Compiling Servant.Auth.ServerSpec

test/Servant/Auth/ServerSpec.hs:31:1: warning: [-Wunused-imports]
    The import of ‘Data.Monoid’ is redundant
      except perhaps to import instances from ‘Data.Monoid’
    To import instances alone, use: import Data.Monoid()
   |
31 | import           Data.Monoid
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:33:1: warning: [-Wunused-imports]
    The import of ‘Data.Time.Clock’ is redundant
      except perhaps to import instances from ‘Data.Time.Clock’
    To import instances alone, use: import Data.Time.Clock()
   |
33 | import           Data.Time.Clock                     (getCurrentTime)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:53:1: warning: [-Wdodgy-imports]
    Module ‘Servant’ does not export ‘header’
   |
53 | import           Servant                             hiding (BasicAuth,
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...

test/Servant/Auth/ServerSpec.hs:55:1: warning: [-Wunused-imports]
    The import of ‘Servant.API.Generic’ is redundant
      except perhaps to import instances from ‘Servant.API.Generic’
    To import instances alone, use: import Servant.API.Generic()
   |
55 | import           Servant.API.Generic                 ((:-))
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:57:1: warning: [-Wunused-imports]
    The import of ‘Servant.Auth.Server.Internal.Cookie’ is redundant
      except perhaps to import instances from ‘Servant.Auth.Server.Internal.Cookie’
    To import instances alone, use: import Servant.Auth.Server.Internal.Cookie()
   |
57 | import           Servant.Auth.Server.Internal.Cookie (expireTime)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:58:1: warning: [-Wdeprecations]
    Module ‘Servant.Auth.Server.SetCookieOrphan’ is deprecated:
      "instance exists in http-api-data-0.3.9. This module will be removed in next major release."
   |
58 | import           Servant.Auth.Server.SetCookieOrphan ()
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:132:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘[HCli.CookieJar]’ not matched: []
    |
132 |       let (cookieJar:_) = resp ^.. responseCookieJar
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:133:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘Maybe HCli.Cookie’ not matched: Nothing
    |
133 |           Just xxsrf = find (\x -> cookie_name x == xsrfField xsrfCookieName cookieCfg)
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...

test/Servant/Auth/ServerSpec.hs:148:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘[HCli.CookieJar]’ not matched: []
    |
148 |       let (cookieJar:_) = resp ^.. responseCookieJar
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:149:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘Maybe HCli.Cookie’ not matched: Nothing
    |
149 |           Just xxsrf = find (\x -> cookie_name x == xsrfField xsrfCookieName cookieCfg)
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...

test/Servant/Auth/ServerSpec.hs:160:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘[HCli.CookieJar]’ not matched: []
    |
160 |       let (cookieJar:_) = resp ^.. responseCookieJar
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:161:11: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘Maybe HCli.Cookie’ not matched: Nothing
    |
161 |           Just token = find (\x -> cookie_name x == sessionCookieName cookieCfg)
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...

test/Servant/Auth/ServerSpec.hs:199:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘resp’ shadows the existing binding
      bound at test/Servant/Auth/ServerSpec.hs:190:11
    |
199 |           resp <- getWith opts (url port ++ "/uverb")
    |           ^^^^

test/Servant/Auth/ServerSpec.hs:217:21: warning: [GHC-62161] [-Wincomplete-uni-patterns]
    Pattern match(es) are non-exhaustive
    In a pattern binding:
        Patterns of type ‘Maybe BS.ByteString’ not matched: Nothing
    |
217 |                     Just xsrfCookieValue = cookie_value <$> find (\c -> cookie_name c == xsrfField xsrfCookieName cookieCfg) (destroyCookieJar jar)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/Servant/Auth/ServerSpec.hs:229:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘resp’ shadows the existing binding
      bound at test/Servant/Auth/ServerSpec.hs:222:11
    |
229 |           resp <- getWith loggedInOpts (url port)
    |           ^^^^

test/Servant/Auth/ServerSpec.hs:233:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘resp’ shadows the existing binding
      bound at test/Servant/Auth/ServerSpec.hs:229:11
    |
233 |           resp <- getWith loggedInOpts (url port ++ "/logout")
    |           ^^^^

test/Servant/Auth/ServerSpec.hs:291:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘resp’ shadows the existing binding
      bound at test/Servant/Auth/ServerSpec.hs:284:11
    |
291 |           resp <- getWith (loggedInOpts) (url port)
    |           ^^^^

test/Servant/Auth/ServerSpec.hs:294:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘resp’ shadows the existing binding
      bound at test/Servant/Auth/ServerSpec.hs:291:11
    |
294 |           resp <- getWith loggedInOpts (url port ++ "/logout")
    |           ^^^^

test/Servant/Auth/ServerSpec.hs:511:21: warning: [-Wunused-matches]
    Defined but not used: ‘usr’
    |
511 |       Authenticated usr -> respond (WithStatus @200 (42 :: Int))
    |                     ^^^

test/Servant/Auth/ServerSpec.hs:544:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘respond’ shadows the existing binding
      imported from ‘Servant’ at test/Servant/Auth/ServerSpec.hs:(53,1)-(54,76)
      (and originally defined in ‘Servant.Server.UVerb’)
    |
544 |       \_req respond ->
    |             ^^^^^^^

test/Servant/Auth/ServerSpec.hs:609:31: warning: [GHC-68441] [-Wdeprecations]
    In the use of ‘unregisteredClaims’ (imported from Crypto.JWT):
    Deprecated: "use a [subtype](#g:subtypes) to define additional claims"
    |
609 | claims val = emptyClaimsSet & unregisteredClaims . at "dat" .~ Just val
    |                               ^^^^^^^^^^^^^^^^^^
[2 of 2] Compiling Main
[3 of 3] Linking /tmp/workdir-servant-auth-server/servant-auth-server-0.4.9.0/dist-newstyle/build/x86_64-linux/ghc-9.6.6/servant-auth-server-0.4.9.0/t/spec/build/spec/spec
Configuring test suite 'readme' for servant-auth-server-0.4.9.0...
Preprocessing test suite 'readme' for servant-auth-server-0.4.9.0...
Building test suite 'readme' for servant-auth-server-0.4.9.0...
[1 of 1] Compiling Main

README.lhs:40:22: warning: [GHC-39567] [-Wstar-is-type]
    Using ‘*’ (or its Unicode variant) to mean ‘Data.Kind.Type’
    relies on the StarIsType extension, which will become
    deprecated in the future.
    Suggested fix: Use ‘Type’ from ‘Data.Kind’ instead.
   |
40 | data Auth (auths :: [*]) val
   |                      ^
[2 of 2] Linking /tmp/workdir-servant-auth-server/servant-auth-server-0.4.9.0/dist-newstyle/build/x86_64-linux/ghc-9.6.6/servant-auth-server-0.4.9.0/t/readme/build/readme/readme
